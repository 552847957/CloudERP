<h>存货</h>

<h1>概述</h1>

<p>
在很多情形下，“存货”被写作“库存”，这可能会让有些人迷惑。在这里“库存”与“存货”可以完全互换。
</p>

<p>
对于业务而言，存货可以清晰地分类。例如玩具厂大约有乐高，玩具车，棋类游戏等分类。他们被称为存货分类（物料组），并且会由企业定义。存货分类（物料组）的名称可以在任何时间更改。
</p>

<p>
注：整合到总账是在库存分类（物料组）的层次上进行的。总帐过账由商品（物料）所属的存货分类（物料组），与销售地区，销售类型共同决定的。总分类账的销售总账代码，销售成本总账代码放在另外的表格中，它是通过主菜单的系统设置标签中的选项来维护的。
已开发票库存--通过使用开发票选项，会在发票上指定的仓库减少手上的库存。已开红字发票库存—通过使用开红字发票选项，增加红字发票指定的仓库的库存。存货调整，可以针对手上的数量进行调整以及在不同的仓库间转移库存。
</p>

<p>
新致ERP平台软件维护了每种库存变化的记录，因此，来自销售发票，采购订单收货，库存调整，销售红字发票的库存变化，均可以使用库存变化查询查看。库存变化的汇总提供了一个简单的机制来查看历史用量，并且NewtouchERP提供了显示月度用量，消耗量的查询。
</p>

<p>
 库 存可以用标准成本法（手动维护成本）或者平均加权成本法（自动维护）记值。如果总账的存货整合处于激活状态，存货调整，标准成本修改，由开票和红字发票而 导致的销售成本和库存变化，都会入帐到总帐。当使用库存日记账时，假设当在公司参数中设置为库存与总账整合为启用时，存货账户余额和当前库存的价值相等， 这时手上库存的价值就会在总账中得到（准确）维护，每次库存变化都会有一个完整的总帐日记账追踪。这是专门为繁忙而又高使用的环境的非正式的总分类账而设 置的。
</p>

<p>
 注：存货日记账是可选项。销售分类帐/应收账户界面与存货总分类帐界面是分开的。因此，将销售入帐到总帐而不入账库存和销售成本成为可能。
</p>

<h1>库存系统特性</h1>

<ul>
    <li>多仓库，可以维护不限数量的仓库。</li>
	<li>库存物料的价格可以针对定义于任何（所有）货币的每种销售类型，允许极大的定价灵活性。</li>
	<li>自动的缺货订单处理。还没有付运的销售订单可以在开发票时自动列为缺货订单或者是适当时将剩余的订单取消。</li>
	<li>根据库存物料维护库存变化历史记录。</li>
	<li>允许虚拟的库存物料，这些项目可以被开发票，计价，计算成本，但是每个项目都不维护库存记录，例如劳务及服务。</li>
	<li>可以定义套装部品。套装部品订单按照预先定义的数量分解成组成部品的配件，乘以套装物料订购的数量。部件的数量于是出现在订单上供用户修改。</li>
	<li>组合部品可以用与套装部品类似方法定义。这些部品只为订购，开发票和销售分析而存在。不存在需要维护的库存余额，相反，部件的数量根据组合部品定义的比例而更新。</li>
	<li>每个库存分类可以有无限的属性。此分类下的每个物料都可以在每种属性下记录它自己的值。根据存货种类增加附加字段。</li>
	<li>存货可以被设置为序列化－也就是每个库存物料要求有自己的序列号。</li>
	<li>库存可以被设置为批控制－库存的每一批物料必须指定一个批号。</li>
	<li>发票和红字发票查询与库存变化相关联，所以可以查询到发票销售的物料细节。</li>
	<li>标准成本维护和价值报告。</li>
	<li>可以根据月度/仓库/ 总体查询库存用量。</li>
	<li>库存计划报告</li>
	<li>与采购，应付账款，应收账款和总帐整合。</li>
</ul>

<h1>库存种类</h1>

<p>
所有的物料必须指定一个单独的存货种类（物料组）。存货种类按如下方式定义：
</p>

<p>
设置->库存->存货种类维护
</p>

<p>
库存分类的目的是将相似的物料分为一组，并且定义描述此种类所有物料的关键信息－从而达成数据的存储效率最大化，输入需求最小化。库存种类有如下的字段： 
</p>

<ul>
	<li>种类代码－最多6个字符</li>
	<li>种类描述－最多20个字符</li>
	<li>存货类型－此种类是否与服务商品，制成品或者原材料相关</li>
	<li>此种类存货成本的总帐代码－需要时，每一种类都可以在独立的总帐帐户维护－这当然仅当在公司偏好中设置了库存与总帐整合才有效。</li>
	<li>存货成本调节总帐代码，此代码用于此类别中所有物料调整的入帐－包括数量和成本调节。</li>
	<li>价格差异入帐的总帐代码。价格差异是指此种类物料的物料采购成本和存货成本的差异。</li>
	<li>材料用量差异入帐的总帐代码。此差异指物料清单BOM期待的产品的材料价格与发出的材料的实际价格比较。当制造工单结束时，材料用量差异实现及入帐。</li>
	<li>此种类物料的在制品的总帐代码。此帐户仅在制造过程中，此种物料有工作订单时使用。</li>
</ul>

<p>
 此种类于是决定了如何将存货相关的交易入帐到总帐 － 属于同一种类的所有物料都用同一方式入帐。
</p>

<p>
除了以上的字段，每个存货种类可以定义任意数量的属性。这些可以看作作为此种类的一部分，物料设置时，用户定义的字段。例如，在演示数据中，我们有一个种类是空调－我们有兴趣维护某些关于空调的附加信息例如： 
</p>

<ul>
	<li>制冷功率</li>
	<li>加热功率</li>
	<li>噪音分贝</li>
	<li>等等  ...</li>
</ul>

<p>
 这些字段与其他存货种类无关。当种类属性定义后－有选项来定义字段的输入－他们可能仅仅是文字框，选择框或者复选框连同预先定义为以逗号分割的值列表。当一个用户定义一个新物料时，这些新字段（属性）将显示在此物料的输入页面。
</p>

<p>
要对指定的库存种类输入新的属性，需要点击该种类的编辑按钮-新的属性表会显示在此种类的通常信息下方。
</p>

<h1>增加库存项目</h1>

<p>
要输入新的物料必须输入某些基本信息：
</p>

<ul>
	<li>关于物料代码和描述连同其种类和物料类型的基本信息。</li>
	<li>成本信息</li>
	<li>供应商采购信息</li>
	<li>售价</li>
</ul>

<p>
 基本信息的输入是从菜单完成的，选择库存标签然后点击“增加一个新库存项目”。
</p>

<h1>物料代码</h1>

<p>
每个库存物料都必须有库存代码，这些代码可以由任意的最长20个 字符组成。需要考虑库存物料的编码规则，以确保类似的库存物料显示在一起。在内部，在不同的查找表中，系统根据代码去排序库存物料。系统地命名库存物料的 方法可以为以后节省大量时间。然而，系统提供了很好的工具用来查询。在供应商采购数据中，也可以记录与物料对应的供应商的部品号码。
</p>

<p>
有一个脚本可以实现回溯性地修改库存代码，脚本会查询所有需要的表，各仓库库存，物料清单(BOM)，销售订单细节，采购订单明细，销售分析等，以确保所有的历史记录随新的部品代码而改变。这个脚本与其他脚本一起可以从 Z_index.php找到(--没有提供这个工具的菜单链接—由于这些工具的危险属性)。修改库存代码的脚本自身命名为Z_ChangeStockCode.php.
</p>

<h1>部品描述</h1>

<p>
库存物料的描述 – 最长可用50个 字符。每一存货物料都需要一个描述。每次开库存物料发票，红字发票或者调整时，描述都会出现在查找框里。也有工具允许输入每个部品的详细描述，这些部品显 示在页面上，顾客可以据此下单。这一栏允许非常长的描述，甚至是关于产品特性与益处的。这个栏位目的是可以用来产生公司的产品目录，或者供需要了解产品更 多信息的顾客在线下单使用。显示在发票或者红字发票上的只有短的部品描述。
</p>

<h1>种类</h1>

<p>
首先需要设置这些种类－从菜单的系统设置标签。在选择库存种类时，记住系统使用种类信息来分析和作汇总报告以及识别做为标准成本总帐整合的帐户，如果此整合选项启用的话。库存物料输入页面有一个链接用来创建新库存种类。
</p>

<p>
所有库存物料都需要一个库存种类。库存种类是一个文字字段，它将相似的库存物料组合在一起。在选择存货时，限制搜索在要求种类的范围内经常是有用的。显示在选择产品页面的库存种类选择框为此目的而设。
</p>

<h1>衡量单位</h1>

<p>
此字段描述了库存是如何维护的并且是自明的。它是强制字段。此选项表在config.php中作为一个数组变量维护。要增加或者减少其他的测量单位，必须由系统管理员编辑定义在config.php中称作$InventoryUnits的变量。
</p>

<h1>经济订单数量</h1>

<p>
这是新销售订单或者采购订单的默认数量。目前，这仅仅是作为备忘录－将来这会是MRP计算的关键部分。
</p>

<h1>包装的体积</h1>

<p>
此字段是运费计算所必须的。它记录了要发运的已包装物料的体积。参考运费计算部分。
</p>

<h1>包装重量</h1>

<p> 
此字段用作运费计算。它记录了要发运的已包装物料的重量。运费计算会根据总重和总体积算出的运费中，取其高者收取。很多运输公司使用转换系数，并且收费取其高者。参考运费计算部分。
</p>

<h1>计量单位</h1>

<p> 
此字段描述了库存是如何维护的并且是自明的。这是一个强制字段，因此，有些值是在系统安装时就定义了。系统管理员可以定义增加的值或更改现存的值。方法是由设置->库存设置->计量单位链接。
</p>

<h1>当前或者淘汰</h1>

<p> 
如果此字段被设置为淘汰，它意味着库存物料不再使用。然而，发票上可能有存货历史，红字发票可能需要此物料。因此库存物料主记录仍然需要。（当此部品的库存变化或者销售分析记录存在时，删除是不允许的).然而，当进行发票，存货物料查询时，它是不会出现的。另外，此物料在存货报告中将标记为已中止。
</p>

<h1>生产或购买</h1>

<p> 
此字段是强制的，并且显示此库存物料是否：
</p>

<p>
 制造的－如果此物料定义为制造的，它就有一张物料清单BOM - 并没有机制阻止本应制造的物料却由采购而来。
</p>

<p> 
向外面的供应商采购。由于此物料是采购而来的，他不能也是制造的并且有一张物料清单。
</p>

<p> 
其他库存物料的组装。组装物料没有自身的物理库存，也没有自身的成本。组装物品的发票引致此物品所有组件的存货变化，每个组件的库存也按照物料清单指定的比例减少。在总帐日记帐因发票而创建的销售成本分录（如果链接是启用的)是按照（此组装料在开发票时所用的）物料清单BOM上的所有物料成本加总而产生的。
</p>

<p> 
处理订单时，其他存货物料的套装应该分解成它的组件，套装本身并非一个物理物品，它只是将一组数量的部品输入到一张订单的一个捷径。不像组件，套装不会出现在发票或者订单上，但是会“分解”成他的组件以供更改。因此套装没有任何相关的成本或者物理存货数量。
</p>

<p> 
服务商品没有相关的物理存货。这用于对于按照地点保留存货数量没有兴趣的服务公司。然而，同样的销售分析和变化历史被保留下来－显示售出的服务金额或者开红字发票的金额。
</p>

<p> 
此字段与MRP和生产排产相关.此 字段也可为服务库存项目设定－只要停用按地点和总数的存货数量追踪。服务库存商品用于为服务和劳务开发票，甚至是不要求追踪的有形物料。系统依然会创建库 存变化记录并且可以用于发票召回和红字发票查询。库存调整对服务库存商品而言是不允许的。组装物料可以有创建的销售分析记录，但是没有库存数量被维护，此 组件的库存变化记录被创建。组装物料通常在如下状况被使用，仓库为不同目的保持物料组件，只有准备发货时才挑出所需物料组装成商品。
</p>

<h1>设置组装商品（物料）</h1>

<p> 
我们拿卫浴套件作说明，当企业需要追踪卖出多少套时－例如，销售分析－但是只希望知道组成卫浴套件的卫浴马桶和卫浴水箱的库存数量。
</p>

<p> 
企业永远不会保留组成套件的存货，当盘点时，仅仅点算水箱和马桶而不是套件。如果有任何组好的套件，这些套件需要拆成组件，对组件进行存货盘点。
</p>

<p> 
这些部品被系统称为“组装”物料。
</p>

<p> 
当为组装物品开发票时，组成它的组件库存会依据它的物料清单的数量乘以组装物品出售的数量。
</p>

<p> 
例如，卫浴套装有两个螺丝用来将马桶固定在地板上，此组装的物料清单如下：
</p>

<ul>
	<li>1 x cistern  1个水箱</li>
	<li>1 x White S trap pan 1个白色 S 马桶</li>
	<li>2 x Pan screws 2个马桶螺丝</li>
	<li>1 x pan pac carton 1个马桶包装纸箱</li>
</ul>

<p> 
如果销售10套－水箱，马桶和马桶纸箱的库存都将减少10个，马桶螺钉的库存将减少20个。库存变化查询显示这个变化以及引起此变化的组装物品，和相关的发票编号。
</p>

<p> 
重 要的是记住，当组装物品被退货时，这个过程反向进行－组件被重新记回库存，如同它开发票同样方式。红字发票必须被输入并对应正确的库存地点，否则的话，退 货地点马桶和水箱库存和红字发票输入的地点库存将会出现错误。在输入红字发票时，也可以使用工具将引起的存货注销－这种情况下，存货地点是不重要的。
</p>

<p> 
下一点有些令人困惑。在组装物品变化查询的时候，系统也显示了库存的变化。它的好处是可以一眼看出组装物品都卖给谁。然而，没有组装物品的库存状态查询，因为他们不是库存物品(仅仅有部品存在，且只在要发货时才挑出部品来组装）。
</p>

<p> 
当首次设置部品时—需要定义描述和库存种类。并且在这个时间点，从标题为”制造，购买，套装，组装或者虚拟部件”的页面，定义物品类型。系统提供的选项是“购买”--默认设置，”制造””组装”，”套装”或者 “虚拟”.
</p>

<p> 
考虑组装物品的处理：
</p>

<p> 
如果在库存状态页面上显示有该种物料的存货－－那么只是修改标志是无法把它转换成组装物品的--库存必须首先被调整成零，并且将相应的部品库存向上调整。并且，如果该物品有采购订单，是不可以转换成组装物品的。记住：组装物品并非作为一个独立的部品而存在，只是为了销售而形成的真实库存物料的组合。
</p>

<p> 
当把部品设置成为组装物品时，在“商品（物料）”菜单上，选择一个组装商品之后，该组装部品会显示一个选项，查看物料清单成本。这个查询显示了组装物品目前的物料清单BOM，以及每个组件的成本和总成本，用来作销售分析和总帐入帐。
</p>

<p> 
要设置一个组装部品，必须设置物料清单(BOM)--此物品的BOM.
</p>

<p> 
从主菜单的制造标签 － 位于维护部分 －点击链接 “物料清单”。物料查询界面就会出现，可以输入物料描述的摘录或者物料代码选项。输入选项后，点击“查询”按钮。并非所有的物料都会显示－只是具备物料清单的物料才显示－他们包括组装物料，制造部品和套装。如果部品并非定义为组装物料－它不会显示!
</p>

<p> 
点击部品代码按钮，会显示一个页面来输入组成BOM的部件。如果此物品的物料清单BOM已经存在，它会显示已经设置的部件。对显示在目前BOM的每个项目，有两个链接分别用来编辑或者删除该行。
</p>

<p> 
对组装商品而言，要将一个新部件输入BOM，所有需要作的是（点击页面上方的查看部件链接，然后在BOM下面）从列表中选择部件的代码－由于仓库和工作中心对组装商品而言不会用到，因此接受默认值就可以。（销售订单指定的仓库被用作所有组装部件库存的输入）。要为每个组装商品输入要求部件的数量－默认值是1（可能在大多数情况下都是1）。
</p>

<p> 
生效日期－截止日期和生效日期 （也被称作工程变更控制日期）规定了期间所使用的组装部件。如果BOM处于变更期间，并且顾客建议从05年１月１日起卫浴套件使用新马桶，那么新马桶会从该日起作为新部件输入。现存马桶的截止日期将更改为04年12月31日。另一选择是在变更当日改变所有的BOMs.
</p>

<p> 
一旦部件所有字段都被输入，点击输入按钮，即刻增加部件到BOM。BOM完成时，转至主菜单其他链接进行下一个任务。小心不要误点击输入，误将默认部件输入－必须首先从菜单选择部件。
</p>

<h1>受控（物料）</h1>

<p> 
这 个字段表明该物料是否会进行批管理。批管理有很多名词来描述，包括：批管理，捆管理，卷管理等等。简而言之，当交付，运输，盘点，开发票时，它允许对输入 的每个物料批加一个参考编号。当控制项目记账时，批的参考编号和每批的数量必须输入。很多品质管理体系需要这项功能，来追溯工作订单中使用的那批原材料。 或者哪卷布卖给了特定的顾客。其他行业用不同的称呼命名他们的批例如一段，一容器，一班次。每次当创建涉及控制物料的交易时，系统会通过另一个表格累积所 选择的批的数量。（批／卷／序列号等等)
</p>

<h1>序列化</h1>

<p> 
序列化是控制的一个特殊例子，它的每批的大小都是1。每个正在接收的库存都会被提示输入序列号，所有序列号的库存都会被分开维护。如果没有设定控制，编序列号就不会有任何作用。
</p>

<h1>条型码</h1>

<p> 
这个字段是商品的唯一性识别条码，典型情况是包含商品的EAN条码。这个字段被用来通过EANCOM edi信息识别商品。
</p>

<h1>折扣种类</h1>

<p> 
用 于由折扣种类和销售类型组成的折扣矩阵。当一个订单订购一种商品，它有折扣种类代码和一个顾客的销售类型，此商品有一个折扣矩阵输入，并且此订单的数量比 矩阵优惠点数值多，系统自动将此折扣种类中的所有商品的折扣输入到订单行。此一方法允许折扣数量点运用在相似产品范围中。
</p>

<p> 
 此折扣矩阵是一个２字符的字段，并且输入时不进行错误检查。
</p>

<h1>小数的位数</h1>

<p> 
有些库存物料要求保留和显示小数。这个字段用于整个系统的发票，订单和所有需要显示此物料数量的地方。
</p>

<h1>商品属性</h1>

未完成

<h1>库存成本</h1>

<p> 
N新致ERP平台软件为计算成本提供两种框架 
</p>

<ul>
	<li>标准成本</li>
	<li>加权平均成本</li>
</ul>

<h1>标准成本</h1>

<p> 
标准成本使用的情况：当成本产生变化而采用了折中标准－偏离标准的差异被称为价格差异。标准成本特别与进口商和制造商相关，因为汇率，运费和制造成本和数量变化使每种商品有不同的成本。
</p>

<p> 
对标准成本－需要手动维护成本－－当大量商品汇率永久偏移，显示产品成本已经永久改变了。变化经常同一方向，这时需要变更标准。
</p>

<h1>加权平均成本</h1>

<p> 
加权平均成本自动更新成本，它依据采购的数量和成本，但是会计入目前此物料库存的数量。
</p>

<p> 
让我们举例说明－考虑某种物料目前手上有100件，每件的价值是1美元，有10件物料正在运来。当10件物料到达并且登记到库存时，系统会为此10件货物创建收货记录，成本依照目前的在库成本1美元（新的成本现在还不知道－我们必须等待采购发票的输入).如果总帐整合到库存，库存帐户（从库存种类记录）增加了10件，乘以单价1美元＝10美元，收货暂存帐户（从公司参数设置）记贷方10美元。
</p>

<p> 
现在采购发票入帐到收货记录－物料实际价格是单价1.50美元X10件＝15美元，于是产生了5美元的差异记录，收货的成本记录是10美元，货物的实际发票价格是15美元。使用加权平均成本（库存总帐整合启用），差异过帐到存货价值，物料存货成本增加，因此5美元差异被分配到手上存货的全部数量－库存已有的100件加上10件＝110件。价值$5/110=$0.04545被加到价值为$1现存存货，新物料成本变更为$1.04545作为新的加权平均成本。
</p>

<p> 
类似地，当运输结束，所运输货物的成本用同样方法更新。
</p>

<p> 
甚至使用加权平均成本，当物料成本有显著变化，且要求立即反应时，也仍然可以手动更新成本。然而，在正常情况下，不必手动更改成本。
</p>

<h1>制造和组装商品成本</h1>

<p> 
这些商品要求定义物料清单(BOM). 根据定义在BOM中的组件的成本的加总，所有有物料清单的商品会由系统自动更新他们的成本（任何需要的总帐入帐都会被创建）。尽管也可能单独更新这些商品的成本，BOM的任何变更都会覆写所作的修改，成本还是所有部件成本的加总。然而，部件成本的变更不会在变更部件成本时，自动上传到该制造商品的成本。但每次制造商品的工作单被创建时，成本会被上传和更新。每次组装商品被出售，成本都会在开发票时被上传。
</p>

<h1>库存商品成本</h1>

<p> 
从菜单上选择库存标签和修改标准成本。（点击维护下面的选择商品链接，然后点击维护标准成本.)可以直接输入商品的代码，来显示目前的成本结构。如果在公司参数设定页（菜单－－系统设置标签）此连接被设置为激活状态时，在这个页面上作的成本修改可以反应到总分类账中的标准成本日记帐中。 
</p>

<p> 
另外一种选择，可以从物料页 选择要修改成本的存货物料－－一旦物料被选择－－一个到选择物料页的链接显示在所有页的页标题栏。维护和初始化成本数据是系统设置的一个关键部分。简单地 定义物料标题并不足够。此地输入的成本信息被用作库存价值报告和总分类帐整合库存的日记帐，为销售成本，库存调整的成本值，已经收到的库存的价值等等。只 是在用户对库存价值没有兴趣，总分类帐－库存整合没有要求时，才可以忽略。 
</p>

<h1>材料成本</h1>

<p> 
如果物料是买来的。这个字段应该显示平均或者期望的物料成本。如果物料是自己制造的，它应该是外面买来材料的成本加上自己制造的部件的总成本，从帐单中低一级的层次开始算起。将来，这项目将会连接到BOM的成本总成。这个数字的更改会影响到这个物料下的所有库存的价值。这个系统是个标准成本系统。当购买来物料时，实际的采购成本会和这个数字比较，并且差异会被报告到物料适用的库存分类账的总分类帐中。
</p>

<h1>劳力成本</h1>

<p> 
 这个字段是包含在库存物料成本中的总的劳务标准成本。劳务成本是运用于这个部品的劳动而不是用于制造BOM中下层组件的制造劳动成本。组件的成本应该包含于材料成本中。这个数字的改变会影响所有现有存货的价值。参考物料成本的备注。将来，这部分会被变更为自动地进行成本加总。
</p>

<h1>间接成本</h1>

<p> 
 这 个字段应该是在销售一件库存品时，所收回的所有间接成本。它的值影响手中所有这个物料的存货价值，如同前面所述的劳力成本，物料成本一样。劳力成本，物料 成本和间接成本加总得到库存品的标准成本的总成本。这个总数被用来作存货计值。将来，根据工作中心间接费用比率和每个工作中心的劳力数量，成本会自动更 新。
</p>

<h1>标准成本核算法考虑的因素</h1>

<p> 
每次出售一件库存品时，销售成本帐户（参照库存种类和销售地域分支，由COGS GL入帐表指定)的成本会跟随总物料成本，劳力成本和间接成本而更新，并且库存价值（在库存种类记录中指定的帐户)依据总的标准成本减少。
</p>

<h1>实际成本</h1>

<p> 
实际成本指由系统更新的最近采购的成本。对于一个制造的商品来说，实际成本计算时仅仅包括效率的变动（价格变动排除在外)
</p>

<h1>劳力成本，材料成本和间接成本的变动</h1>

<p> 
由 于系统只是维护商品的标准成本，这是库存的计值成本。当变更这个成本时，手上的库存品会因此重新估值或者贬值。如果建立了库存的日记账（这个选项可以从系 统设置，公司参数的选项中设定），通过使用目前定义的库存种类总分类帐户，系统会创建一个日记帐来反应受影响的库存品的库存价值变动。
</p>

<p> 
 只有在收取费用后输入的交易才可以根据新成本创建。销售分析会根据交易发生的时间计算成本。
</p>

<p> 
 可以从Z_index.php页 面取得一个工具，它允许依据当前的成本，来更新指定期间的销售分析。这个工具采用销售的数量乘以当前的标准成本，来重新计算指定期间的每项销售分析记录的 成本－－销售分析的数据被更新。这就意味着在指定期间，由于总分类帐过帐是在开发票，出具红字发票时产生的，而导致总分类帐成本会与销售分析的成本不一 致。
</p>

<h1>选择库存品</h1>

<p> 
 系统里所有页面都有主目录栏，以供选择关键的表－－顾客，库存和供应商。点击“物料”连接可以让用户直接进入库存物品选择页。另外，从菜单，到物料标签，有一个连接是“修改/删除一个库存物品或维护价格”.使用任何一种方法，都会进入所选物料或者产品的页面。
</p>

<p> 
 对 于某个特别商品的搜索，可以通过选择指定的存货种类，来缩小查询范围－－有选择框来选择种类。如果知道了存货代码的某些要素，可以输入这些要素；如果知道 物料描述的某些要素，也可以输入这些要素－－如果代码和描述栏同时使用，会采用物料描述关键字。注意：输入的文字不需要在物料代码或者描述的开头。有相关 文字的物料，无论文字在编码或者描述的任何部分，都会显示，同时显示的还有该物料的现有库存，物料的计量单位。组装，套装和虚拟部品都会显示手上的库存为 零。
</p>

<p> 
 查询结果的最大的数量可以在config.php的参数中定义－－它限制了返回查询记录的数量，这会让使用低带宽连接的用户不至于因选择了太宽的选择范围而受到惩罚。通过低速拨号上网而下载大量数据会严重降低系统表现。这个选项的默认值为100个项目。
</p>

<p> 
点击要求的物料代码的按钮，将会选中它并且适用于这个物料的选项的连接也会显示。
</p>

<p> 
选中一个物料后，可能作变更如下： 
</p>

<ul>
	<li>物料主要信息</li>
	<li>成本</li>
	<li>定价</li>
	<li>安全库存（再订购水平）</li>
	<li>采购数据</li>
</ul>

<p> 
也可能查询： 
</p>

<ul>
	<li>库存变化</li>
	<li>状态－－手上的数量，下订单采购的数量，以及根据地点的顾客销售订单的数量</li>
	<li>每个月的历史用量</li>
	<li>未完成的销售订单</li>
	<li>未完成的采购订单</li>
	<li>完成的销售订单</li>
	<li>物料清单BOM</li>
</ul>

<p> 
可以进一步发起交易：
</p>

<ul>
	<li>转移不同地点间库存</li>
	<li>调整手上的库存数量</li>
</ul>

<p> 
在此页的下面，有链接对不同物料进行刷新查询。 
</p>

<h1>修改库存物料</h1>

<p> 
 可 以修改物料的主要信息。在库存物料主页面，唯一不能修改的是物料代码。它被用于系统中很多表当中，库存代码的修改要求相应修改大量其他表格的数据，以进行 相应变化。系统提供了一个特殊的库存代码修改工具。由于变化影响的范围甚广，建议在正常运作时间之外进行这种操作，因为对于一个大的数据库而言，服务器负 担的巨大的。参见特殊工具。当修改数据字段时，通常要考虑如下方面：
</p>

<h1>修改种类</h1>

<p> 
库存物料的种类可以在任何时间修改。
</p>

<p> 
然而，如果库存日记帐的选项是激活状态(在公司参数设置),需要记住总帐 对相应的种类的编号的设定是无法作回溯性修改的。换言之，总分类帐中的日记帐，包括发票，红字发票，库存调整，它们使用旧种类总帐的代码是不能改变的。如果需要的话，总帐的代码可以用手工日记帐的方式修改。
</p>

<p> 
 注：销售分析根据在开发票，红字发票时的库存种类而确定。库存种类的信息储存在销售分析表格且不能作回溯性改变。
</p>

<h1>制造或者购买标志的修改</h1>

<p> 
有库存的存货物料不能更改成虚拟存货物料，组装项目或者套装物料。由于系统对于这些项目不维护在库数量，所以有初始数量是不合适的。在可以进行这种修改前，所有库存必须已经开发票或者开红字发票或者调整为零。同样地，只有制造，组装，或者套装物品才可以有BOM.目前有BOM的制造物料（组装物料，套装物料)修改成采购物料是不允许的。必须先删除BOM. 
</p>

<h1>库存种类</h1>

 库存种类是应用于某些存货类型的自然组合。一个企业通常会有几个明显的种类。例如，珠宝制造商可能有库存种类如：金链，银链，钻石，红宝石等。

<h1>库存种类代码</h1>

 这是系统内部使用的6位 字符编码字段。种类代码在不同的种类中必须是唯一的。当设立的库存物料使用这个分类或者有使用这个种类的销售分析记录存在，它就无法作回溯性更改或者删 除。种类代码被存储以支持销售分析记录，来作报告。所有的库存物料都必须定义属于某一种类，并且对应适宜的种类代码被存储在StockMaster（库存主表）中。

<h1>库存种类描述</h1>
 这种描述被用作查询库存物料，在销售分析报告中描述所指的库存种类。虽然在某些报告中不会显示完整的描述，但是最多可以输入20个字符。

 负债表的库存总帐帐户

对于企业而言，存货是一项资产－－根据GAAP的规定，其计值是取原始购买价格的低者和或者可以被出售的净价值（净实现价值).为 把库存的价值完全整合到账目中，每次收到库存，必须把资产值登记到账户上。对每个库存种类而言，可以指定过帐到总帐中的不同资产帐户。这个字段下的可选 项，是应该记录这一种类现有库存的价值的总帐资产帐户。按照会计术语表述，这是总分类帐，系统产生的标准成本日记账会过帐到负债表帐目。可以对每一类库存 设置一个总帐帐户或者把所有原材料库存种类过帐到一个原材料总帐帐户，对于成品的库存分类也可以用同样方法。选择框列出了所有的可用负债表帐户－－损益帐 户不会出现(因为在损益帐户中记录库存价值是不合适的).如果需要增加一个新的总分类帐户，这需要首先设定。如果公司参数标志“为库存转移创建总账分录（按照标准成本)Create GL entries for stock transactions (at standard cost)”没有设置为可用时，这个字段不会被使用。

<h1>库存调整总帐过帐科户</h1>
当库存调整时－－例如库存数量增加，这会增加现有库存的价值。在一个整合的系统中，库存增加值被过帐到 “负债表库存总账帐目”（“Balance Sheet Inventory GL Account”.这里的复式记账是为了将库存值反映在损益帐户上。发现的库存或者向上调整的库存价值会体现为盈利。在库存向下调整时正好相反。这个字段的输入是总帐帐户－－损益帐户，发现的库存的盈利（损失的库存为损失）将入帐到此帐户。按 会计术语而言的标准成本日记帐，，针对库存调整，这是系统创建它会将损益输入入帐到此总帐。对任何的库存种类或者对所有的库存种类而言，它可以不同。选择 框列出了所有的可用的损益账目。如果公司参数标志“为库存转移创建总分类账目（标准成本下）”设置为不可用，这个字段将无法使用。


<h1>采购价格差异账户</h1>

当 采购某物料的发票以确定的汇率输入时，以当地的货币表示的成本会与标准的成本比较，这个差异会被当作收益或者损失。这个差异被称为采购价格差异。采购价格 差异必须被过帐到损益帐户。这个字段的账目是总分类账目，它使用应付账目的发票凭证来将此差异入帐，即标准成本和这类库存的标商品准成本的差异。当采购发 票被输入的时候，就要会计算价格差异；除非采购的物料正在运输途中。当运输结束后，要计算运输采购价格差异。如果公司参数标志“为库存转移创建总分类账目 （标准成本下）”设置为不可用，这个字段将无法使用。

<h1>材料使用差异帐户</h1>

 还没有完成


此总账是使用工作订单来将差异入帐，此差异就是工作订单实际使用的材料和根据工作单标准要求成品计算出来的材料的差异。如果公司参数标志“为库存转移创建总分类账目（标准成本下）”设置为不可用，这个字段将无法使用。
<h1>资源类型</h1>

 尚未完成

 此字段表明了存货种类代表的资源类型，属于制成品，原材料，劳务和虚拟存货之一。此字段用来区分劳务类型的库存商品，与其他的部品，是为了在成本汇总时计算加工中心的间接成本。它也用来排序库存报告以确保原材料和制成品分成一组。

<h1>存货地点维护</h1>

系统维护一张地点表，它包含一个5个字符的地点代码以及地点描述（最长20个字符).此 描述是在开发票和开红字发票查询时使用的字段。为保持数据库尽量压缩，在存货变化交易中储存的是相关的地点代码。库存地点的数量可以按需设置。当定义了一 个新的地点时，就在数据库里为所有物料创建了地点记录。当一个地点被删除时，与之相关的所有物料的地点记录也被删除。然而，如果有此地点任何物品的库存变 化记录或者冻结库存，此地点记录就无法删除。由于地点代表物理地点，货物和服务都由此提供，非常重要的事项是确定销售适用的税收。税务局也必须与地点记录 一起指定。它被用于计算使用的税率，与之相关的要付运的顾客分公司的税务局，以及销售物料的税负水平。

注意：地点代码不能回溯性修改。也不能被删除，如果有库存变化，用户(默认地点)或者顾客分公司记录设置为从此地点收货。

<h1>存货调整</h1>

通过此选项可以对单个库存商品进行注销或者增加。实物库存的修正和交付库存可以用这个选项输入。可以通过选择SelectProduct.php物料页上的连接来输入调整量或者直接从交易部分的菜单选择。使用第二种连接，必须知道商品的代码，没有从这个页面选择商品代码的工具。

 如果库存总帐整合在公司参数上设定为可以使用(在设置标签下)，那么系统在总分类账中创建需要的日记账来更新库存账户和损益帐户，在库存种类记录中指定的库存调整帐户。(参考上述的库存种类和后续的总账整合).

 注：库存调整不能用于套件，组合件或者虚拟库存，因为这些商品没有保留库存记录。

对于受控制商品而言，一定要选择被调整的批/序列号。

<h1>库存地点转移</h1>
不同地点间的库存转移需要从发出地减少库存及从接受地增加库存。通过输入一个库存转移使一个转移生效。如同库存调整同样的方法，可以从SelectProduct.php页， 它可以从任何页的页首（点击物料菜单）连接到，或者直接从主菜单－库存标签－交易部分的库存标签连接。所有这些要求的是发出地点和发往地点，日期和发送 的数量。如果业务需要记录转移中的库存，需要多建立一个中转地点，当库存开始发出时，就是向中转地点进行转移。当收到库存时，就是库存从中转地点转出至收货地点。库存地点的转移可以通过库存变化查询。

 注意：库存地点转移不适用于套件，组合件和虚拟库存。因为这些项目不维护库存记录。

 从2.9开始生效，可以设置包含很多部件的大宗库存的转移。这些允许产生一个目录表与发送的货物一起送出。直到收货库存地点收到转移的货物时，转移才真正生效

<h1>库存报告和查询</h1>

 允许的查询类型包括： 

<ul>
	<li>库存状态</li>
	<li>库存变化</li>
	<li>库存使用</li>
</ul>

所有的库存查询都通过产品选择表。一旦一个产品被选择，各种相关查询的连接就会出现。

<h1>库存状态查询</h1>

 显示手上有多少库存的细节，以及库存位置(例如每个地点有多少)，连同由于部品过期未交货，而影响的销售订单的数量，以及过期未交付的采购订单的数量，都可以查询到。不仅是针对这个部品过期未交货的订单累积数量，也包含所有上层组合部品的需求数量，乘以根据上层物料每个单位需要的数量。这就确保对这个部品的所有需求都包含在内。

.
所有的库存查询都可以从SelectProduct.php页面查到－－这个页面可以从系统的每个页面位于顶部的链接“Item”物料连接到。

如果选择的物料是受控制的项目，状态查询也会显示一个连接来显示批信息。如果这个项目是有序列号的，这个连接会指向序列号而不是批。
<h1>库存变化查询</h1>

物料的库存变化根据日期降序排列，最近的变化会显示在屏幕的最上方。

 查询显示了对于指定地点的库存商品变化，附有链接进一步指向引起这种变化的交易细节，例如发票或者红字发票。默认只显示3个月库存的变化情况。但是库存变化的起始日期可以在查询页面修改。

 注意：库存变化的查询也适用于虚拟和组合库存商品。然而，由于虚拟物料不是实体的库存项物料，所以没有维护库存数量和地点（没有东西被保存)的记录。对于虚拟和组合部品及套件而言，根据地点的查询结果永远是零。当选择了一个虚拟物料或者组合物料或者套件物料，是没有库存状态查询的链接的。

如果库存变化是发票或者红字发票，会显示顾客，开发票或者红字发票的价格会显示出来。

<h1>库存使用量查询</h1>

这 个查询显示每个存货地点的月度库存物料的消耗，它或者是由于销售（净红字发票）或者是调整引起的。不同地点的转移作为运送被忽略了。物料的使用将库存变化 的数量加总，销售的组合物料包含的部品的库存变化因此也包括在内。可以根据地点查看使用量，也可以查看所有地点的总使用量。

 有一个用户可以修改的标志，用来决定该物料需要维护多少个月的库存用量。

<h1>库存价值报告</h1>

这个报告显示了运行报告时的库存，并且根据目前的标准成本。两份报告显示了依据地点和库存种类的库存总数量。详细报告列出了单独的库存商品和每个物料的价值。没有库存的物料没有被显示出来。这个报告也可以只依据选择的库存种类和地点来查询，以与总分类帐户核对。

在这个发行版里包含了一个独立脚本，它可以设定查询库存列表的报告并且电邮至事前设定好的电子邮箱里。为了利用这个工具，必须在linux的发行版本下用排程命令crontab设定:在每个月的最后一天，使用wget 下载。这个脚本被称为MailInventoryValuation.php.这个脚本需要编辑增加用户的电子邮箱地址以及其他要运行这个报告的参数。默认的情况下，它会产生一份所有地点所有库存的报告。如果在每个月的第一天0:0分，发送报告，相应的在cronbtab设定应该如下（假设wget被装在路径/usr/bin/wget,同时网络服务器安装在同一台机器上：

# Scheduled email of monthly Inventory Valuation report 按计划电邮月度存货价值报告

-0 0 1 * * root /usr/bin/wget http://localhost/web-erp/MailInventoryValuation.php

 由于页面无产出－使用网络浏览器运行时是无意义的，尽管会给定义的收件人发送另一封电子邮件。

<h1>库存计划报告</h1>

此报告显示了过去四个月库存项目的用量，以及目前的库存,未完成的销售订单和未完成的采购订单。它建议一个重新订购的数量，依据是月数乘以前四个月中最高的月用量（从所有的库存地点），减去手头的库存和采购订单。它无法满足所有的目的，但是为做采购决定提供了很好的信息。

 库存计划报告从主菜单下的库存标签下的查询和报告部分找到并且运行。

<h1>库存检查</h1>

在库存检查完之后，有进行库存检查自动调整的脚本。然而，这项功能目前还不适用于受控制的项目。通常进行库存检查的程序如下：

 步骤1：

 确保对所有已经发出的产品都开了发票。

 步骤2：



 从主菜单-->库存-->点击stock check sheet库存检查表打印出库存检查表。

这页允许选择要检查的库存地点，库存种类。注意有个新字段称作：

 库存检查冻结行动


默认情况下，这被设定为列出要计算的项目。在开始之前，必须运行选择“制作一个新的库存检查数据文件”。 这就复制了运行报告时手上库存的数量。如果要制作另一个地点的库存检查表，并且重新设定制作新的库存检查数据文件，之前的库存检查数据文件就会被覆盖掉。 如果甲地在进行检查，乙地也希望发起一个检查，那么乙地的人员必须在检查表冻结行动项下选择增加／更新现有的库存检查文件。同样的，如果要检查另一个种类 的库存项目，同样也要选择增加／更新现有的库存检查文件。

 步骤3：

 当库存检查数据文件创立后－－需要点算库存。

步骤4

点的数需要输入--系统只会接受在步骤2中 选择的所盘点种类的部品输入。系统允许每个项目的多种清点，最后加总后计算出需要调整的数量。并且，清点发起人或者清点单的编号可以输入，可以提供一个何 地输入的库存的追踪。一有可以输入的数据，点算人应该把点算表交给数据输入团队，这样数据会在清点结束后尽快完成输入。


 步骤5

 完成点算数据的输入后，可以运行比较报告

这个需要在主菜单-->库存下运行

比较点算于库存检查数据


运行这个报告时有许多选择。默认选项是运行报告而不作任何调整。开始的时候应该运行这种模式，这样可以审核建议的调整。需要的时，在任何调整前都可以进行重新确认。

 步骤6：

当调整是正确的，可以选择报告及关闭库存比较文件Report and Close the Inventory Comparison File和进行必要调整Process Adjustmenets as Nessary,可以重新运行报告


这个过程不可回头－－如果你不想作出调整，那么所有动作必须手动改回。所有当运行比较模式时，千万要当心。 